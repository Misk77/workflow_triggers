name: PR - grey skipped workflow

on:
 - pull_request 

jobs:
  kalle-checksum-verification:
    runs-on: ubuntu-latest
    outputs:
      step-status: ${{ steps.step-status.outputs.status }}
    steps:
      - name: Check for failed workflows
        id: step-status
        run: |
          echo "This workflow is intentionally skipped and greyed out. It will not be executed automatically but can be triggered manually."
          

  notify-on-success:
    needs: kalle-checksum-verification
    runs-on: ubuntu-latest
    if: ${{ needs.kalle-checksum-verification.outputs.step-status == 'success' }}
    steps:
      - name: Notify on Success
        run: |
          echo "The kalle-checksum-verification step was successful. Notify accordingly."
          exit 0

  notify-on-status:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'success' || github.event.workflow_run.conclusion == 'skipped' }}
    steps:
      - name: Notify on Success or Skipped
        run: |
          echo "The kalle-checksum-verification step conclusion was: ${github.event.workflow_run.conclusion}"

 

  notify-on-failure:
    needs: kalle-checksum-verification
    runs-on: ubuntu-latest
    if: ${{ needs.kalle-checksum-verification.outputs.step-status == 'failure' }}
    steps:
      - name: Notify on Failure
        run: echo "The kalle-checksum-verification step failed. Notify accordingly."


